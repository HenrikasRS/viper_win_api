<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Walkthrough</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="eb30683b-6c0e-43a3-8902-27e68f2265b2" /><meta name="Description" content="Preparing for development with Rubedos.Viper.Net SDK" /><meta name="Microsoft.Help.ContentType" content="How To" /><meta name="BrandingAware" content="true" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">Rubedos VIPER™ SDK&amp;API (MS Windows) Documentation<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html\364aac1f-0ff3-495d-82cb-d835e2fecd7c.htm" title="Rubedos VIPER™ SDK&amp;API (MS Windows) Documentation" tocid="roottoc">Rubedos VIPER™ SDK&amp;API (MS Windows) Documentation</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/a6dfead0-67e8-4213-9c3b-ad993c442126.htm" title="Getting Started" tocid="cfdbddef-5fc5-4164-bc00-0392275d38da">Getting Started</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/a6dfead0-67e8-4213-9c3b-ad993c442126.htm" title="Prerequisites" tocid="a6dfead0-67e8-4213-9c3b-ad993c442126">Prerequisites</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="../html/eb30683b-6c0e-43a3-8902-27e68f2265b2.htm" title="Walkthrough" tocid="eb30683b-6c0e-43a3-8902-27e68f2265b2">Walkthrough</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/d1f1ef7e-7ad4-4e46-9e67-364c6a1b7539.htm" title="Samples" tocid="d1f1ef7e-7ad4-4e46-9e67-364c6a1b7539">Samples</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn"><h1>Walkthrough</h1></td></tr></table><span class="introStyle"></span> <div class="introduction"><p>Preparing for development with Rubedos.Viper.Net SDK</p></div><h3 class="procedureSubHeading">Typical development setup</h3><div class="subSection"><ol><li><p>Installed VIPER evaluation kit has following deployment scheme:</p><div class="mediaNear"><img alt="image 3" src="../media/image3.png" /></div><p>Client application shall be running on development machine and access VIPER services through Viper.Net assembly. Additionally there are other 3rdparty assemblies available:</p><ul><li><p>OpenCV.Net - a wrapper around famous OpenCV library to work with images</p></li><li><p>Helix-toolkit on SharpDX - an extensive 3D visualisation library, for pointcloud rendering</p></li><li><p>Ros.Net - a set of assemblies to interface with ROS framework</p></li><li><p>log4net - is a logging tool</p></li></ul></li><li><p>Download and install Viper.Net SDK and samples</p></li><li><p>Download and install ROS tools for windows. The tools shall greatly help you to quickly access VIPER data and topics, for example RVizWin can visualize active topics and PointCloudViewer shall render 3D view from VIPER in real-time</p></li></ol></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Next Steps</span></div><div id="ID1RBSection" class="collapsibleSection"><p>Once the steps are done, open up Visual Studio 2015 or higher and create a C# project (Console Application, WPF application or WinForms application). Add Viper.Net and related assemblies to your project references and compile following code:</p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EAAABAAA_tab1" class="codeSnippetContainerTabSingle">Example #1</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EAAABAAA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EAAABAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAAABAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-keyword">using</span> System;
<span class="highlight-keyword">using</span> System.Collections.Generic;
<span class="highlight-keyword">using</span> System.Linq;
<span class="highlight-keyword">using</span> System.Text;
<span class="highlight-keyword">using</span> System.Threading;
<span class="highlight-keyword">using</span> System.Threading.Tasks;
<span class="highlight-keyword">using</span> Ros.Net.utilities;
<span class="highlight-keyword">using</span> Rubedos.Viper.Net;

<span class="highlight-keyword">namespace</span> ReadTopicsSample
{
  <span class="highlight-keyword">class</span> Program
  {
    <span class="highlight-keyword">private</span> <span class="highlight-keyword">static</span> <span class="highlight-keyword">readonly</span> log4net.ILog log = log4net.LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);

    <span class="highlight-keyword">static</span> <span class="highlight-keyword">void</span> Main(<span class="highlight-keyword">string</span>[] args)
    {
      <span class="highlight-keyword">try</span>
      {
        <span class="highlight-comment">// Specify VIPER IP here</span>
        <span class="highlight-keyword">using</span> (CvmDevice module = <span class="highlight-keyword">new</span> CvmDevice(<span class="highlight-literal">"http://192.168.1.170:11311"</span>))
        {
          module.RosNode = <span class="highlight-literal">"ReadTopicsSample"</span>;
          module.Connect();
          <span class="highlight-keyword">if</span> (!module.IsConnected)
            <span class="highlight-keyword">throw</span> <span class="highlight-keyword">new</span> InvalidOperationException(<span class="highlight-literal">"Cannot connect to VIPER!"</span>);

          <span class="highlight-comment">// Each image stream is associated with specific named topic. To receive images on needs to subscribe to the topic</span>
          <span class="highlight-comment">// and attach a sink where images must be cached when received. Since there are several image types in .NET, use </span>
          <span class="highlight-comment">// a corresponding sink type, e.g. BitmapSink for System.Drawing.Bitmap.</span>
          <span class="highlight-comment">// One image subscriber can have multiple sinks, if multiple types of the same topic image are needed.</span>
          <span class="highlight-keyword">foreach</span> (<span class="highlight-keyword">var</span> topic <span class="highlight-keyword">in</span> module.GetListOfImageTopics())
          {
            log.InfoFormat(<span class="highlight-literal">"Getting image from topic '{0}'"</span>, topic);
            <span class="highlight-keyword">using</span> (ImageSubscriber&lt;ImageHandler&gt; subscriber = <span class="highlight-keyword">new</span> ImageSubscriber&lt;ImageHandler&gt;())
            {
              BitmapSink sink = <span class="highlight-keyword">new</span> BitmapSink();
              subscriber.AddSink(sink);
              AutoResetEvent waitHandle = <span class="highlight-keyword">new</span> AutoResetEvent(<span class="highlight-keyword">false</span>);

              <span class="highlight-comment">// Once subsribed, this event shall notify when there are new images available in the topic. If event is not raised, it means image</span>
              <span class="highlight-comment">// has not been published for some reason.</span>
              sink.Updated += (s, e) =&gt;
              {
                log.InfoFormat(<span class="highlight-literal">"Received image of size {0}"</span>, sink.Bitmap.Size);
                waitHandle.Set();
              };

              subscriber.Subscribe(topic);
              <span class="highlight-keyword">if</span> (!waitHandle.WaitOne(<span class="highlight-number">3000</span>))
                log.WarnFormat(<span class="highlight-literal">"Topic has no images published"</span>);
            }
          }

          module.Disconnect();
        }
      }
      <span class="highlight-keyword">catch</span> (Exception ex)
      {
        log.Error(ex);
      }
    }
  }
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAAABAAA");</script></div></div></div><div id="pageFooter" class="pageFooter"><p>Copyright (C) 2019 Rubedos - All Rights Reserved</p><div class="feedbackLink">Send comments on this topic to
        <a id="HT_MailLink" href="mailto:support%40rubedos.com?Subject=Rubedos VIPER™ SDK%26API (MS Windows) Documentation">Rubedos Support Team</a></div>
        <script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>